{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useEffect } from 'react';\nexport function getFavArray(uid) {\n  var arrFav;\n  return _regeneratorRuntime.async(function getFavArray$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          arrFav = [];\n          _context.prev = 1;\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(AsyncStorage.getItem(uid + '_arrFav'));\n\n        case 4:\n          arrFav = _context.sent;\n          _context.next = 10;\n          break;\n\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](1);\n          console.log('error: ' + _context.t0);\n\n        case 10:\n          return _context.abrupt(\"return\", arrFav);\n\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[1, 7]], Promise);\n}\nexport function updateFavArray(uid, arrFav) {\n  return _regeneratorRuntime.async(function updateFavArray$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem(uid + '_arrFav', arrFav));\n\n        case 3:\n          _context2.next = 8;\n          break;\n\n        case 5:\n          _context2.prev = 5;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.log('error: ' + _context2.t0);\n\n        case 8:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, [[0, 5]], Promise);\n}\nexport function checkFavorite(checkKey, currFavList) {\n  if (currFavList !== []) {\n    var i = currFavList.findIndex(function (item) {\n      return item.rid == checkKey;\n    });\n\n    if (i >= 0) {\n      return true;\n    }\n\n    return false;\n  }\n\n  return true;\n}\nexport function addFavorite(newMeal, currFavList, currUser) {\n  if (!checkFavorite(newMeal.idMeal, currFavList)) {\n    var count = currFavList.length();\n    var meal = {\n      id: count,\n      uid: currUser,\n      rid: newMeal.idMeal,\n      name: newMeal.strMeal,\n      image: newMeal.strMealThumb\n    };\n    useEffect(function () {\n      fetch('https://thoupapi.michellecheung.net/api/v1/favourites/create.php?', {\n        headers: {\n          'Accept': 'application/jsonn',\n          'Content-Type': 'application/json'\n        },\n        method: \"POST\",\n        body: JSON.stringify(meal)\n      }).then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        console.log('Success: ' + result);\n      }, function (error) {\n        console.log('Error: ' + error);\n      });\n    });\n    currFavList.push(meal);\n  }\n}\nexport function delFavorite(delMeal, currFavList, currUser) {\n  useEffect(function () {\n    fetch('https://thoupapi.michellecheung.net/api/v1/favorites/delete.php?id=' + currUser + '&rid=' + delMeal.idMeal).then(function (res) {\n      return res.json();\n    }).then(function (result) {\n      console.log('Success: ' + result);\n    }, function (error) {\n      console.log('Error: ' + error);\n    });\n  });\n  var filteredList = currFavList.filter(function (item) {\n    return item.idMeal != delMeal.idMeal;\n  });\n  return filteredList;\n}","map":{"version":3,"names":["AsyncStorage","useEffect","getFavArray","uid","arrFav","getItem","console","log","updateFavArray","setItem","checkFavorite","checkKey","currFavList","i","findIndex","item","rid","addFavorite","newMeal","currUser","idMeal","count","length","meal","id","name","strMeal","image","strMealThumb","fetch","headers","method","body","JSON","stringify","then","res","json","result","error","push","delFavorite","delMeal","filteredList","filter"],"sources":["C:/Users/miche/OneDrive/Documents/GitHub/good-thoup-app/services/FavouritesManager.js"],"sourcesContent":["import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport {useEffect} from 'react';\r\n\r\nexport async function getFavArray(uid) {\r\n    let arrFav = [];\r\n    try { \r\n        arrFav = await AsyncStorage.getItem(uid + '_arrFav')\r\n    } catch(e) {\r\n        console.log('error: '+e);\r\n    }\r\n\r\n    return arrFav;\r\n}\r\n\r\nexport async function updateFavArray(uid, arrFav) {\r\n    try {\r\n        await AsyncStorage.setItem(uid + '_arrFav', arrFav)\r\n    } catch (e) {\r\n        console.log('error: ' + e);\r\n    }\r\n}\r\n\r\nexport function checkFavorite(checkKey, currFavList) {\r\n    if (currFavList !== []) {\r\n        let i = currFavList.findIndex(item => item.rid == checkKey);\r\n        if(i >= 0) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nexport function addFavorite(newMeal, currFavList, currUser) {\r\n\r\n    if(!checkFavorite(newMeal.idMeal, currFavList)) {\r\n        let count = currFavList.length();\r\n        const meal = {\r\n            id: count,\r\n            uid: currUser,\r\n            rid: newMeal.idMeal,\r\n            name: newMeal.strMeal,\r\n            image: newMeal.strMealThumb\r\n        }\r\n\r\n            useEffect(() => {\r\n            fetch('https://thoupapi.michellecheung.net/api/v1/favourites/create.php?', {\r\n                headers: {\r\n                    'Accept': 'application/jsonn',\r\n                    'Content-Type': 'application/json'\r\n                }, \r\n                method: \"POST\",\r\n                body: JSON.stringify(meal) \r\n            })\r\n            .then(res => res.json())\r\n            .then(\r\n                (result) => {\r\n                    console.log('Success: ' + result);\r\n                },\r\n                (error) => {\r\n                    console.log('Error: ' + error);\r\n                }    \r\n            ) \r\n        })\r\n\r\n        currFavList.push(meal);\r\n    }\r\n}\r\n\r\nexport function delFavorite(delMeal, currFavList, currUser) {\r\n\r\n    useEffect(() => {\r\n        fetch('https://thoupapi.michellecheung.net/api/v1/favorites/delete.php?id=' + currUser + '&rid=' + delMeal.idMeal)\r\n        .then(res => res.json())\r\n        .then(\r\n            (result) => {\r\n                console.log('Success: ' + result);\r\n            },\r\n            (error) => {\r\n                console.log('Error: ' + error);\r\n            }    \r\n        ) \r\n    })\r\n\r\n    let filteredList = currFavList.filter(item => item.idMeal != delMeal.idMeal);\r\n    return filteredList;\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}