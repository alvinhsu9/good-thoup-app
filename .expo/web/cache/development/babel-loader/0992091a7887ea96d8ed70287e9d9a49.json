{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { getFavArray } from \"../services/FavouritesManager\";\nimport { getCurrUser } from \"../services/LoginManager\";\nimport CategoryLayout from \"../components/CategoryLayout\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Favourites(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoaded = _useState4[0],\n      setIsLoaded = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      dataResult = _useState6[0],\n      setDataResult = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      uid = _useState8[0],\n      setUid = _useState8[1];\n\n  useEffect(function () {\n    getCurrUser().then(function (result) {\n      var res = JSON.parse(result);\n\n      if (res !== null) {\n        setUid(res);\n      }\n    }, function (error) {\n      console.log('error: ' + error);\n    });\n  });\n  useEffect(function () {\n    getFavArray(uid).then(function (result) {\n      var arrFav = JSON.parse(result);\n\n      if (arrFav !== []) {\n        setDataResult(arrFav);\n      } else {\n        setDataResult([]);\n      }\n    }, function (error) {\n      console.log('error: ' + error);\n      setError(error);\n    });\n  });\n  return _jsxs(View, {\n    children: [_jsx(Text, {\n      children: \"My Favourites\"\n    }), displayRecipe(error, isLoaded, dataResult, navigation), _jsx(Button, {\n      title: \"Sync Favourites\",\n      buttonStyle: {\n        backgroundColor: '#E16162'\n      },\n      containerStyle: {\n        width: 100,\n        height: 30,\n        marginTop: 10,\n        marginTop: 0,\n        marginBottom: 10,\n        marginLeft: 'auto',\n        marginRight: 'auto'\n      },\n      titleStyle: {\n        color: 'white',\n        fontFamily: 'Roboto_400Regular',\n        fontSize: 11\n      },\n      onPress: function onPress() {\n        syncFavourites(dataResult);\n      }\n    })]\n  });\n}\n\nfunction syncFavourites(arrFav) {\n  fetch('https://thoupapi.michellecheung.net/api/v1/users/getFaves.php').then(function (res) {\n    return res.json();\n  }).then(function (result) {}, function (error) {});\n  fetch('https://thoupapi.michellecheung.net/api/v1/users/create.php', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(arrFav[i])\n  });\n}\n\nfunction displayRecipe(error, isLoaded, dataResult, navigation) {\n  var renderItem = function renderItem(item) {\n    _jsx(CategoryLayout, {\n      itemData: item,\n      navigatorRef: navigation\n    });\n  };\n\n  if (error) {\n    return _jsx(View, {\n      children: _jsxs(Text, {\n        children: [\"Error: \", error.message]\n      })\n    });\n  } else if (dataResult == null || dataResult == []) {\n    return _jsx(View, {\n      children: _jsx(Text, {\n        children: \"No Favourites\"\n      })\n    });\n  } else {\n    return _jsx(View, {\n      style: styles.container,\n      children: _jsx(FlatList, {\n        data: dataResult,\n        renderItem: renderItem,\n        keyExtractor: function keyExtractor(item) {\n          return item.id;\n        }\n      })\n    });\n  }\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#F6F0EE',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    width: '100%'\n  },\n  listContainer: {\n    width: '100vw',\n    backgroundColor: '#EFF0F3'\n  },\n  heading: {\n    color: '#2C2A31',\n    fontSize: 30,\n    marginTop: 10,\n    marginBottom: 10,\n    fontFamily: 'Roboto_400Regular'\n  }\n});","map":{"version":3,"names":["useEffect","useState","getFavArray","getCurrUser","CategoryLayout","Favourites","navigation","error","setError","isLoaded","setIsLoaded","dataResult","setDataResult","uid","setUid","then","result","res","JSON","parse","console","log","arrFav","displayRecipe","backgroundColor","width","height","marginTop","marginBottom","marginLeft","marginRight","color","fontFamily","fontSize","syncFavourites","fetch","json","method","headers","body","stringify","i","renderItem","item","message","styles","container","id","StyleSheet","create","flex","alignItems","justifyContent","listContainer","heading"],"sources":["C:/Users/miche/OneDrive/Documents/GitHub/good-thoup-app/screens/FavouritesScreen.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport {View, Text, ActivityIndicator, StyleSheet, FlatList, Button} from 'react-native';\r\nimport { getFavArray } from '../services/FavouritesManager';\r\nimport { getCurrUser } from '../services/LoginManager';\r\nimport CategoryLayout from '../components/CategoryLayout';\r\n\r\nexport default function Favourites({navigation}) {\r\n    \r\n    const [error, setError] = useState(null);\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n    const [dataResult, setDataResult] = useState([]);\r\n    const [uid, setUid] = useState(0)\r\n\r\n \r\n    useEffect(() => {\r\n      getCurrUser()\r\n      .then(\r\n        (result) => {\r\n          let res = JSON.parse(result)\r\n          if(res !== null) {\r\n            setUid(res);\r\n          }\r\n        }, \r\n        (error) => {\r\n          console.log('error: ' + error);\r\n        }\r\n      )\r\n    })\r\n    \r\n    useEffect(() => {\r\n        getFavArray(uid)\r\n        .then (\r\n            (result) => {\r\n                let arrFav = JSON.parse(result);\r\n                if (arrFav !== []) {                    \r\n                    setDataResult(arrFav);  \r\n                                                \r\n                } else {\r\n                    setDataResult([]);\r\n                }\r\n            },\r\n            (error) => {\r\n                console.log('error: ' + error);\r\n                setError(error);\r\n            }\r\n        )\r\n    })\r\n\r\n    return(\r\n        <View>\r\n            <Text>My Favourites</Text>\r\n                {displayRecipe(error, isLoaded, dataResult, navigation)}\r\n            <Button\r\n            title=\"Sync Favourites\"\r\n            buttonStyle={{backgroundColor:'#E16162'}}\r\n            containerStyle={{\r\n                width: 100,\r\n                height: 30,\r\n                marginTop: 10,\r\n                marginTop: 0,\r\n                marginBottom: 10,\r\n                marginLeft: 'auto',\r\n                marginRight: 'auto',\r\n            }}\r\n            titleStyle={{\r\n                color: 'white',\r\n                fontFamily: 'Roboto_400Regular',\r\n                fontSize: 11,\r\n            }}\r\n            onPress={() => {syncFavourites(dataResult)}}\r\n            />\r\n        </View>\r\n    )\r\n\r\n}\r\n\r\nfunction syncFavourites(arrFav) {\r\n\r\n    //get favourites from api\r\n    //get favourites from local storage\r\n    //check which one is shorter\r\n    //update if there are any differences\r\n    fetch ('https://thoupapi.michellecheung.net/api/v1/users/getFaves.php')\r\n    .then(res => res.json())\r\n    .then(\r\n        (result) => {\r\n\r\n        },\r\n        (error) => {\r\n\r\n        }\r\n    )\r\n    \r\n        fetch('https://thoupapi.michellecheung.net/api/v1/users/create.php', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(arrFav[i]) \r\n        })\r\n    \r\n        \r\n}\r\n\r\n\r\n\r\nfunction displayRecipe(error, isLoaded, dataResult, navigation) {\r\n    const renderItem = (item) => {\r\n        <CategoryLayout itemData={item} navigatorRef={navigation}/> \r\n    }\r\n\r\n    if (error) {\r\n    // show an error message\r\n        return (\r\n            <View>\r\n            <Text>Error: {error.message}</Text>\r\n            </View>\r\n        );\r\n    }\r\n    // else if (!isLoaded) {\r\n    // // show the ActivityIndicator (spinner)\r\n    //     return (\r\n    //         <View>\r\n    //             <Text>Preparing...</Text>\r\n    //             <ActivityIndicator size=\"large\" color=\"#ffffff\"/>\r\n    //         </View>\r\n    //     );\r\n    // }\r\n    else if (dataResult == null || dataResult == []) {\r\n    // not an error but no meals, so show a message\r\n        return (\r\n            <View>\r\n                <Text>No Favourites</Text>\r\n            </View>\r\n        );\r\n    }\r\n    else {\r\n    // show the data in the flat list and display data on CategoryLayout.js\r\n        return (\r\n            <View style={styles.container}>\r\n                <FlatList\r\n                    data={dataResult}\r\n                    renderItem={renderItem}\r\n                    keyExtractor={item => item.id}\r\n                />\r\n            </View>\r\n        );\r\n    }\r\n\r\n}\r\n\r\n const styles = StyleSheet.create({\r\n   container: {\r\n     flex: 1,\r\n     backgroundColor: '#F6F0EE',\r\n     alignItems: 'center',\r\n     justifyContent: 'flex-start',\r\n     width: '100%',\r\n   },\r\n   listContainer: {\r\n    width: '100vw',\r\n    backgroundColor: '#EFF0F3',\r\n   },\r\n   heading: {\r\n    color: '#2C2A31',\r\n    fontSize: 30,\r\n    marginTop: 10,\r\n    marginBottom: 10,\r\n    fontFamily: 'Roboto_400Regular',\r\n   }\r\n });"],"mappings":"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"},"metadata":{},"sourceType":"module"}